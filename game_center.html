<!DOCTYPE html>
<html lang="zh-TW">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>æ¸¸æˆä¸­å¿ƒ - æ–¹å—çˆ†ç ´ & è´ªé£Ÿè›‡</title>
    <style>
        /* é€šç”¨æ ·å¼ */
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
        }
        
        body {
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0c29, #302b63, #24243e);
            color: #fff;
            padding: 20px;
        }
        
        /* æ¸¸æˆä¸­å¿ƒå®¹å™¨ */
        .game-center-container {
            max-width: 1200px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            gap: 30px;
        }
        
        /* å¤´éƒ¨ */
        .game-center-header {
            text-align: center;
            padding: 30px;
            background: linear-gradient(135deg, rgba(58, 134, 255, 0.2), rgba(76, 201, 240, 0.2));
            border-radius: 20px;
            border: 2px solid #3a86ff;
            box-shadow: 0 10px 30px rgba(0, 0, 0, 0.3);
        }
        
        .game-center-header h1 {
            color: #3a86ff;
            font-size: 3.5rem;
            margin-bottom: 10px;
            text-shadow: 0 0 20px rgba(58, 134, 255, 0.7);
            letter-spacing: 2px;
        }
        
        .game-center-header p {
            color: #ff9e00;
            font-size: 1.3rem;
            max-width: 800px;
            margin: 0 auto;
            line-height: 1.6;
        }
        
        /* æ¸¸æˆé€‰æ‹©åŒºåŸŸ */
        .game-selection {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(350px, 1fr));
            gap: 30px;
            margin-bottom: 30px;
        }
        
        .game-card {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            overflow: hidden;
            transition: all 0.3s ease;
            border: 2px solid transparent;
            cursor: pointer;
            display: flex;
            flex-direction: column;
        }
        
        .game-card:hover {
            transform: translateY(-10px);
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.5);
            border-color: #3a86ff;
        }
        
        .game-card.active {
            border-color: #4CAF50;
            box-shadow: 0 0 30px rgba(76, 175, 80, 0.5);
        }
        
        .game-card-header {
            padding: 25px;
            text-align: center;
            background: linear-gradient(to right, var(--game-color), var(--game-color-dark));
        }
        
        .game-card.block {
            --game-color: #3a86ff;
            --game-color-dark: #4361ee;
        }
        
        .game-card.snake {
            --game-color: #4CAF50;
            --game-color-dark: #45a049;
        }
        
        .game-card-header h2 {
            font-size: 2.2rem;
            margin-bottom: 10px;
            color: white;
        }
        
        .game-card-header p {
            font-size: 1.1rem;
            opacity: 0.9;
        }
        
        .game-card-body {
            padding: 25px;
            flex-grow: 1;
            display: flex;
            flex-direction: column;
            gap: 20px;
        }
        
        .game-stats {
            display: flex;
            justify-content: space-around;
            background-color: rgba(255, 255, 255, 0.1);
            padding: 15px;
            border-radius: 10px;
        }
        
        .stat-item {
            text-align: center;
        }
        
        .stat-label {
            font-size: 0.9rem;
            color: #aaa;
            margin-bottom: 5px;
        }
        
        .stat-value {
            font-size: 1.8rem;
            font-weight: bold;
            color: var(--game-color);
        }
        
        .game-features {
            list-style: none;
        }
        
        .game-features li {
            padding: 10px 0;
            border-bottom: 1px solid rgba(255, 255, 255, 0.1);
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .game-features li:before {
            content: "âœ“";
            color: var(--game-color);
            font-weight: bold;
        }
        
        .game-card-footer {
            padding: 20px 25px;
            background-color: rgba(0, 0, 0, 0.3);
            text-align: center;
        }
        
        .play-btn {
            background: linear-gradient(to right, var(--game-color), var(--game-color-dark));
            color: white;
            border: none;
            padding: 15px 40px;
            font-size: 1.2rem;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s;
            font-weight: bold;
            letter-spacing: 1px;
            width: 100%;
        }
        
        .play-btn:hover {
            transform: translateY(-3px);
            box-shadow: 0 10px 20px rgba(0, 0, 0, 0.3);
        }
        
        /* æ¸¸æˆå±•ç¤ºåŒºåŸŸ */
        .game-display-area {
            background-color: rgba(0, 0, 0, 0.7);
            border-radius: 20px;
            padding: 30px;
            border: 2px solid #3a86ff;
            display: none;
        }
        
        .game-display-area.active {
            display: block;
            animation: fadeIn 0.5s ease;
        }
        
        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(20px); }
            to { opacity: 1; transform: translateY(0); }
        }
        
        .game-display-header {
            display: flex;
            justify-content: space-between;
            align-items: center;
            margin-bottom: 25px;
            padding-bottom: 15px;
            border-bottom: 2px solid rgba(58, 134, 255, 0.3);
        }
        
        .game-display-header h2 {
            color: #4cc9f0;
            font-size: 2.2rem;
            display: flex;
            align-items: center;
            gap: 15px;
        }
        
        .back-to-center {
            background: linear-gradient(to right, #f72585, #b5179e);
            color: white;
            border: none;
            padding: 12px 25px;
            border-radius: 8px;
            cursor: pointer;
            font-weight: bold;
            transition: all 0.3s;
        }
        
        .back-to-center:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 15px rgba(247, 37, 133, 0.3);
        }
        
        .game-container {
            display: none;
        }
        
        .game-container.active {
            display: block;
        }
        
        /* æ¸¸æˆä¸­å¿ƒä¿¡æ¯ */
        .game-center-info {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 25px;
            margin-top: 30px;
        }
        
        .info-card {
            background-color: rgba(255, 255, 255, 0.08);
            padding: 25px;
            border-radius: 15px;
            border-left: 5px solid #ff9e00;
        }
        
        .info-card h3 {
            color: #4cc9f0;
            margin-bottom: 15px;
            font-size: 1.6rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }
        
        .info-card h3:before {
            content: "â˜…";
            color: #ff9e00;
        }
        
        .info-card p {
            line-height: 1.7;
            color: #ddd;
            margin-bottom: 15px;
        }
        
        /* é¡µè„š */
        .game-center-footer {
            text-align: center;
            padding: 25px;
            margin-top: 30px;
            background-color: rgba(0, 0, 0, 0.5);
            border-radius: 15px;
            border-top: 2px solid #3a86ff;
        }
        
        .game-center-footer p {
            color: #aaa;
            margin-bottom: 10px;
        }
        
        /* å“åº”å¼è®¾è®¡ */
        @media (max-width: 768px) {
            .game-center-header h1 {
                font-size: 2.5rem;
            }
            
            .game-selection {
                grid-template-columns: 1fr;
            }
            
            .game-display-header {
                flex-direction: column;
                gap: 15px;
                text-align: center;
            }
            
            .game-stats {
                flex-direction: column;
                gap: 15px;
            }
        }
        
        @media (max-width: 480px) {
            .game-center-header h1 {
                font-size: 2rem;
            }
            
            .game-card-header h2 {
                font-size: 1.8rem;
            }
            
            .game-display-header h2 {
                font-size: 1.8rem;
            }
            
            .play-btn, .back-to-center {
                padding: 12px 20px;
                font-size: 1rem;
            }
        }
    </style>
</head>
<body>
    <div class="game-center-container">
        <!-- æ¸¸æˆä¸­å¿ƒå¤´éƒ¨ -->
        <header class="game-center-header">
            <h1>ğŸ® æ¸¸æˆä¸­å¿ƒ</h1>
            <p>æ¬¢è¿æ¥åˆ°æ¸¸æˆä¸­å¿ƒï¼è¿™é‡Œæ±‡é›†äº†ç»å…¸å¥½ç©çš„æ¸¸æˆã€‚é€‰æ‹©ä½ å–œæ¬¢çš„æ¸¸æˆå¼€å§‹æŒ‘æˆ˜å§ï¼</p>
        </header>
        
        <!-- æ¸¸æˆé€‰æ‹©åŒºåŸŸ -->
        <section class="game-selection">
            <!-- æ–¹å—çˆ†ç ´æ¸¸æˆå¡ç‰‡ -->
            <div class="game-card block active" data-game="block">
                <div class="game-card-header">
                    <h2>æ–¹å—çˆ†ç ´</h2>
                    <p>ä½¿ç”¨æŒ¡æ¿åå¼¹çƒæ¶ˆé™¤æ‰€æœ‰æ–¹å—ï¼Œæ”¶é›†èƒ½é‡æå‡ï¼</p>
                </div>
                <div class="game-card-body">
                    <div class="game-stats">
                        <div class="stat-item">
                            <div class="stat-label">æœ€é«˜åˆ†</div>
                            <div class="stat-value" id="block-high-score">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æœ€é«˜å…³å¡</div>
                            <div class="stat-value" id="block-high-level">1</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ¸¸æˆæ¬¡æ•°</div>
                            <div class="stat-value" id="block-play-count">0</div>
                        </div>
                    </div>
                    <ul class="game-features">
                        <li>å¤šç§èƒ½é‡æå‡æ•ˆæœ</li>
                        <li>æ¸è¿›å¼éš¾åº¦å…³å¡</li>
                        <li>é¼ æ ‡å’Œé”®ç›˜æ§åˆ¶</li>
                        <li>åä¸½çš„è§†è§‰æ•ˆæœ</li>
                    </ul>
                </div>
                <div class="game-card-footer">
                    <button class="play-btn" data-game="block">å¼€å§‹æ¸¸æˆ</button>
                </div>
            </div>
            
            <!-- è´ªé£Ÿè›‡æ¸¸æˆå¡ç‰‡ -->
            <div class="game-card snake" data-game="snake">
                <div class="game-card-header">
                    <h2>è´ªé£Ÿè›‡</h2>
                    <p>æ§åˆ¶è›‡åƒé£Ÿç‰©ï¼Œé¿å…æ’å¢™å’Œè‡ªå·±çš„èº«ä½“ï¼</p>
                </div>
                <div class="game-card-body">
                    <div class="game-stats">
                        <div class="stat-item">
                            <div class="stat-label">æœ€é«˜åˆ†</div>
                            <div class="stat-value" id="snake-high-score">0</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æœ€é•¿é•¿åº¦</div>
                            <div class="stat-value" id="snake-max-length">3</div>
                        </div>
                        <div class="stat-item">
                            <div class="stat-label">æ¸¸æˆæ¬¡æ•°</div>
                            <div class="stat-value" id="snake-play-count">0</div>
                        </div>
                    </div>
                    <ul class="game-features">
                        <li>ä¸‰ç§éš¾åº¦é€‰æ‹©</li>
                        <li>å®æ—¶æœ€é«˜åˆ†è®°å½•</li>
                        <li>æ–¹å‘é”®æ§åˆ¶</li>
                        <li>ç»å…¸æ¸¸æˆä½“éªŒ</li>
                    </ul>
                </div>
                <div class="game-card-footer">
                    <button class="play-btn" data-game="snake">å¼€å§‹æ¸¸æˆ</button>
                </div>
            </div>
        </section>
        
        <!-- æ¸¸æˆå±•ç¤ºåŒºåŸŸ -->
        <section class="game-display-area" id="game-display">
            <div class="game-display-header">
                <h2 id="current-game-title">æ–¹å—çˆ†ç ´</h2>
                <button class="back-to-center" id="back-to-center">è¿”å›æ¸¸æˆä¸­å¿ƒ</button>
            </div>
            
            <!-- æ–¹å—çˆ†ç ´æ¸¸æˆå®¹å™¨ -->
            <div class="game-container" id="block-game-container">
                <!-- è¿™é‡Œå°†åµŒå…¥block.htmlçš„æ¸¸æˆå†…å®¹ -->
                <div class="game-wrapper">
                    <div class="game-header">
                        <div class="stats-container">
                            <div class="stat-box">
                                <div class="stat-title">åˆ†æ•°</div>
                                <div class="stat-value" id="score">0</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-title">ç”Ÿå‘½</div>
                                <div class="stat-value" id="lives">3</div>
                            </div>
                            <div class="stat-box">
                                <div class="stat-title">å…³å¡</div>
                                <div class="stat-value" id="level">1</div>
                            </div>
                        </div>
                    </div>
                    
                    <div class="game-area">
                        <canvas id="block-canvas" width="800" height="500"></canvas>
                        
                        <div class="powerup-active" id="powerup-active"></div>
                        
                        <div class="game-over" id="game-over">
                            <h2>æ¸¸æˆç»“æŸ!</h2>
                            <p>æœ€ç»ˆå¾—åˆ†: <span id="final-score">0</span></p>
                            <button id="play-again-btn">å†ç©ä¸€æ¬¡</button>
                        </div>
                        
                        <div class="level-complete" id="level-complete">
                            <h2>å…³å¡å®Œæˆ!</h2>
                            <p>è¿›å…¥ä¸‹ä¸€å…³</p>
                            <button id="next-level-btn">ä¸‹ä¸€å…³</button>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button id="start-btn">å¼€å§‹æ¸¸æˆ</button>
                        <button id="pause-btn">æš‚åœæ¸¸æˆ</button>
                        <button id="restart-btn">é‡æ–°å¼€å§‹</button>
                    </div>
                </div>
            </div>
            
            <!-- è´ªé£Ÿè›‡æ¸¸æˆå®¹å™¨ -->
            <div class="game-container" id="snake-game-container">
                <!-- è¿™é‡Œå°†åµŒå…¥snake.htmlçš„æ¸¸æˆå†…å®¹ -->
                <div class="game-wrapper">
                    <div class="game-header">
                        <div class="score-container">
                            <div class="score-title">å½“å‰åˆ†æ•°</div>
                            <div class="score-value" id="snake-score">0</div>
                        </div>
                        <div class="high-score-container">
                            <div class="high-score-title">æœ€é«˜åˆ†æ•°</div>
                            <div class="high-score-value" id="snake-high-score-display">0</div>
                        </div>
                    </div>
                    
                    <div class="difficulty-selector">
                        <button class="difficulty-btn active" data-speed="150">ç®€å•</button>
                        <button class="difficulty-btn" data-speed="100">ä¸­ç­‰</button>
                        <button class="difficulty-btn" data-speed="70">å›°éš¾</button>
                    </div>
                    
                    <div class="game-area">
                        <canvas id="snake-canvas" width="600" height="400"></canvas>
                        
                        <div class="game-over" id="snake-game-over">
                            <h2>æ¸¸æˆç»“æŸ!</h2>
                            <p>ä½ çš„å¾—åˆ†: <span id="snake-final-score">0</span></p>
                            <button id="snake-play-again-btn">å†ç©ä¸€æ¬¡</button>
                        </div>
                    </div>
                    
                    <div class="game-controls">
                        <button id="snake-start-btn">å¼€å§‹æ¸¸æˆ</button>
                        <button id="snake-pause-btn">æš‚åœæ¸¸æˆ</button>
                        <button id="snake-restart-btn">é‡æ–°å¼€å§‹</button>
                    </div>
                </div>
            </div>
        </section>
        
        <!-- æ¸¸æˆä¸­å¿ƒä¿¡æ¯ -->
        <section class="game-center-info">
            <div class="info-card">
                <h3>æ¸¸æˆç‰¹è‰²</h3>
                <p>æˆ‘ä»¬çš„æ¸¸æˆä¸­å¿ƒæä¾›ä¸¤ç§ç»å…¸æ¸¸æˆï¼šæ–¹å—çˆ†ç ´å’Œè´ªé£Ÿè›‡ã€‚æ¯ä¸ªæ¸¸æˆéƒ½æœ‰ç‹¬ç‰¹çš„ç©æ³•å’ŒæŒ‘æˆ˜ã€‚</p>
                <p>æ‰€æœ‰æ¸¸æˆæ•°æ®éƒ½ä¼šä¿å­˜åœ¨æœ¬åœ°ï¼Œä½ å¯ä»¥éšæ—¶æŸ¥çœ‹è‡ªå·±çš„æ¸¸æˆè®°å½•å’Œæˆå°±ã€‚</p>
            </div>
            
            <div class="info-card">
                <h3>æ§åˆ¶è¯´æ˜</h3>
                <p><strong>æ–¹å—çˆ†ç ´ï¼š</strong>ä½¿ç”¨é¼ æ ‡æˆ–å·¦å³æ–¹å‘é”®ç§»åŠ¨æŒ¡æ¿ï¼Œç©ºæ ¼é”®æš‚åœæ¸¸æˆã€‚</p>
                <p><strong>è´ªé£Ÿè›‡ï¼š</strong>ä½¿ç”¨æ–¹å‘é”®æ§åˆ¶è›‡çš„ç§»åŠ¨æ–¹å‘ï¼Œç©ºæ ¼é”®æš‚åœæ¸¸æˆã€‚</p>
                <p>ä¸¤ä¸ªæ¸¸æˆéƒ½æ”¯æŒç§»åŠ¨è®¾å¤‡è§¦æ‘¸æ§åˆ¶ã€‚</p>
            </div>
            
            <div class="info-card">
                <h3>æ¸¸æˆè®°å½•</h3>
                <p>æˆ‘ä»¬ä¼šè®°å½•ä½ çš„æ¸¸æˆæ•°æ®ï¼ŒåŒ…æ‹¬æœ€é«˜åˆ†ã€æ¸¸æˆæ¬¡æ•°å’Œæˆå°±ã€‚æŒ‘æˆ˜è‡ªå·±ï¼Œåˆ›é€ æ–°çºªå½•ï¼</p>
                <p>æ•°æ®ä¿å­˜åœ¨æµè§ˆå™¨æœ¬åœ°å­˜å‚¨ä¸­ï¼Œæ¸…é™¤æµè§ˆå™¨æ•°æ®ä¼šé‡ç½®è®°å½•ã€‚</p>
            </div>
        </section>
        
        <!-- é¡µè„š -->
        <footer class="game-center-footer">
            <p>æ¸¸æˆä¸­å¿ƒ v1.0 | æ–¹å—çˆ†ç ´ & è´ªé£Ÿè›‡èåˆç‰ˆ</p>
            <p>Â© 2023 æ¸¸æˆä¸­å¿ƒ | æ‰€æœ‰æ¸¸æˆä»…ä¾›å¨±ä¹</p>
        </footer>
    </div>

    <script>
        // æ¸¸æˆä¸­å¿ƒçŠ¶æ€ç®¡ç†
        const gameCenterState = {
            currentGame: null,
            games: {
                block: {
                    name: 'æ–¹å—çˆ†ç ´',
                    highScore: localStorage.getItem('blockHighScore') || 0,
                    highLevel: localStorage.getItem('blockHighLevel') || 1,
                    playCount: localStorage.getItem('blockPlayCount') || 0
                },
                snake: {
                    name: 'è´ªé£Ÿè›‡',
                    highScore: localStorage.getItem('snakeHighScore') || 0,
                    maxLength: localStorage.getItem('snakeMaxLength') || 3,
                    playCount: localStorage.getItem('snakePlayCount') || 0
                }
            }
        };

        // DOMå…ƒç´ 
        const gameDisplayArea = document.getElementById('game-display');
        const currentGameTitle = document.getElementById('current-game-title');
        const backToCenterBtn = document.getElementById('back-to-center');
        const gameCards = document.querySelectorAll('.game-card');
        const playButtons = document.querySelectorAll('.play-btn');

        // åˆå§‹åŒ–æ¸¸æˆä¸­å¿ƒ
        function initGameCenter() {
            // æ›´æ–°æ¸¸æˆå¡ç‰‡ä¸Šçš„ç»Ÿè®¡æ•°æ®
            updateGameStats();
            
            // æ·»åŠ äº‹ä»¶ç›‘å¬å™¨
            playButtons.forEach(button => {
                button.addEventListener('click', function() {
                    const game = this.getAttribute('data-game');
                    startGame(game);
                });
            });
            
            gameCards.forEach(card => {
                card.addEventListener('click', function() {
                    const game = this.getAttribute('data-game');
                    selectGameCard(game);
                });
            });
            
            backToCenterBtn.addEventListener('click', returnToGameCenter);
            
            // é»˜è®¤é€‰æ‹©ç¬¬ä¸€ä¸ªæ¸¸æˆå¡ç‰‡
            selectGameCard('block');
        }

        // æ›´æ–°æ¸¸æˆç»Ÿè®¡æ•°æ®
        function updateGameStats() {
            // æ›´æ–°æ–¹å—çˆ†ç ´æ•°æ®
            document.getElementById('block-high-score').textContent = gameCenterState.games.block.highScore;
            document.getElementById('block-high-level').textContent = gameCenterState.games.block.highLevel;
            document.getElementById('block-play-count').textContent = gameCenterState.games.block.playCount;
            
            // æ›´æ–°è´ªé£Ÿè›‡æ•°æ®
            document.getElementById('snake-high-score').textContent = gameCenterState.games.snake.highScore;
            document.getElementById('snake-max-length').textContent = gameCenterState.games.snake.maxLength;
            document.getElementById('snake-play-count').textContent = gameCenterState.games.snake.playCount;
        }

        // é€‰æ‹©æ¸¸æˆå¡ç‰‡
        function selectGameCard(game) {
            gameCards.forEach(card => {
                card.classList.remove('active');
                if (card.getAttribute('data-game') === game) {
                    card.classList.add('active');
                }
            });
        }

        // å¼€å§‹æ¸¸æˆ
        function startGame(game) {
            gameCenterState.currentGame = game;
            
            // æ›´æ–°æ¸¸æˆæ ‡é¢˜
            currentGameTitle.textContent = gameCenterState.games[game].name;
            
            // æ˜¾ç¤ºæ¸¸æˆå±•ç¤ºåŒºåŸŸ
            gameDisplayArea.classList.add('active');
            
            // éšè—æ¸¸æˆé€‰æ‹©åŒºåŸŸ
            document.querySelector('.game-selection').style.display = 'none';
            document.querySelector('.game-center-info').style.display = 'none';
            document.querySelector('.game-center-footer').style.display = 'none';
            
            // æ˜¾ç¤ºå¯¹åº”çš„æ¸¸æˆå®¹å™¨
            document.querySelectorAll('.game-container').forEach(container => {
                container.classList.remove('active');
            });
            
            document.getElementById(`${game}-game-container`).classList.add('active');
            
            // åˆå§‹åŒ–æ¸¸æˆ
            if (game === 'block') {
                initBlockGame();
                // æ›´æ–°æ¸¸æˆæ¬¡æ•°
                gameCenterState.games.block.playCount++;
                localStorage.setItem('blockPlayCount', gameCenterState.games.block.playCount);
                updateGameStats();
            } else if (game === 'snake') {
                initSnakeGame();
                // æ›´æ–°æ¸¸æˆæ¬¡æ•°
                gameCenterState.games.snake.playCount++;
                localStorage.setItem('snakePlayCount', gameCenterState.games.snake.playCount);
                updateGameStats();
            }
        }

        // è¿”å›æ¸¸æˆä¸­å¿ƒ
        function returnToGameCenter() {
            // éšè—æ¸¸æˆå±•ç¤ºåŒºåŸŸ
            gameDisplayArea.classList.remove('active');
            
            // æ˜¾ç¤ºå…¶ä»–åŒºåŸŸ
            document.querySelector('.game-selection').style.display = 'grid';
            document.querySelector('.game-center-info').style.display = 'grid';
            document.querySelector('.game-center-footer').style.display = 'block';
            
            // åœæ­¢å½“å‰æ¸¸æˆ
            if (gameCenterState.currentGame === 'block') {
                stopBlockGame();
            } else if (gameCenterState.currentGame === 'snake') {
                stopSnakeGame();
            }
            
            gameCenterState.currentGame = null;
        }

        // æ–¹å—çˆ†ç ´æ¸¸æˆé€»è¾‘
        function initBlockGame() {
            const canvas = document.getElementById('block-canvas');
            const ctx = canvas.getContext('2d');
            const scoreElement = document.getElementById('score');
            const livesElement = document.getElementById('lives');
            const levelElement = document.getElementById('level');
            const finalScoreElement = document.getElementById('final-score');
            const gameOverScreen = document.getElementById('game-over');
            const levelCompleteScreen = document.getElementById('level-complete');
            const powerupActiveElement = document.getElementById('powerup-active');
            
            // æ¸¸æˆè®¾ç½®
            const paddleHeight = 15;
            const paddleMinWidth = 100;
            const paddleMaxWidth = 200;
            const ballSize = 12;
            const brickRows = 8;
            const brickCols = 10;
            const brickPadding = 5;
            const brickOffsetTop = 60;
            const brickOffsetLeft = 35;
            
            // æ¸¸æˆçŠ¶æ€
            let paddleWidth = 120;
            let paddleX = (canvas.width - paddleWidth) / 2;
            let ballX = canvas.width / 2;
            let ballY = canvas.height - 50;
            let ballSpeedX = 5;
            let ballSpeedY = -5;
            let ballSpeed = 5;
            let score = 0;
            let lives = 3;
            let level = 1;
            let gameRunning = false;
            let gamePaused = false;
            let rightPressed = false;
            let leftPressed = false;
            let animationId;
            
            // æ–¹å—æ•°ç»„
            let bricks = [];
            // èƒ½é‡æå‡æ•°ç»„
            let powerups = [];
            
            // èƒ½é‡æå‡ç±»å‹
            const POWERUP_TYPES = {
                EXTEND_PADDLE: { color: '#4cc9f0', name: 'æŒ¡æ¿æ‰©å¤§', duration: 10000 },
                SPEED_BALL: { color: '#ff9e00', name: 'çƒåŠ é€Ÿ', duration: 8000 },
                EXTRA_LIFE: { color: '#72efdd', name: 'é¢å¤–ç”Ÿå‘½', duration: 0 },
                PIERCE_BALL: { color: '#f72585', name: 'ç©¿é€çƒ', duration: 5000 }
            };
            
            // å½“å‰æ¿€æ´»çš„èƒ½é‡æå‡
            let activePowerup = null;
            let powerupTimer = 0;
            
            // åˆå§‹åŒ–æ¸¸æˆ
            function initGame() {
                // åˆå§‹åŒ–æŒ¡æ¿å’Œçƒ
                paddleWidth = 120;
                paddleX = (canvas.width - paddleWidth) / 2;
                ballX = canvas.width / 2;
                ballY = canvas.height - 50;
                ballSpeed = 5 + (level - 1) * 0.5;
                ballSpeedX = ballSpeed;
                ballSpeedY = -ballSpeed;
                
                // åˆå§‹åŒ–æ–¹å—
                initBricks();
                
                // æ¸…ç©ºèƒ½é‡æå‡
                powerups = [];
                
                // é‡ç½®èƒ½é‡æå‡çŠ¶æ€
                activePowerup = null;
                powerupTimer = 0;
                powerupActiveElement.style.display = 'none';
                
                // æ›´æ–°æ˜¾ç¤º
                updateDisplay();
                
                // ç»˜åˆ¶åˆå§‹æ¸¸æˆçŠ¶æ€
                draw();
            }
            
            // åˆå§‹åŒ–æ–¹å—
            function initBricks() {
                bricks = [];
                
                // ä¸åŒå…³å¡æœ‰ä¸åŒçš„æ–¹å—å¸ƒå±€
                let brickColors;
                if (level === 1) {
                    brickColors = ['#3a86ff', '#4361ee', '#4cc9f0', '#4895ef', '#7209b7'];
                } else if (level === 2) {
                    brickColors = ['#ff9e00', '#ff9100', '#ff8500', '#ff6d00', '#ff5400'];
                } else {
                    brickColors = ['#f72585', '#b5179e', '#7209b7', '#560bad', '#480ca8'];
                }
                
                // è®¡ç®—æ–¹å—å°ºå¯¸
                const brickWidth = (canvas.width - 2 * brickOffsetLeft - (brickCols - 1) * brickPadding) / brickCols;
                const brickHeight = 22;
                
                // åˆ›å»ºæ–¹å—
                for (let c = 0; c < brickCols; c++) {
                    bricks[c] = [];
                    for (let r = 0; r < brickRows; r++) {
                        // éšæœºå†³å®šæ˜¯å¦ä¸ºç‰¹æ®Šæ–¹å—ï¼ˆæ‰è½èƒ½é‡æå‡ï¼‰
                        const isPowerupBrick = Math.random() < 0.15 && r < brickRows - 2;
                        
                        bricks[c][r] = {
                            x: c * (brickWidth + brickPadding) + brickOffsetLeft,
                            y: r * (brickHeight + brickPadding) + brickOffsetTop,
                            width: brickWidth,
                            height: brickHeight,
                            color: brickColors[r % brickColors.length],
                            status: 1, // 1è¡¨ç¤ºå­˜åœ¨ï¼Œ0è¡¨ç¤ºè¢«æ‘§æ¯
                            isPowerupBrick: isPowerupBrick
                        };
                    }
                }
            }
            
            // ç»˜åˆ¶æ¸¸æˆ
            function draw() {
                // æ¸…ç©ºç”»å¸ƒ
                ctx.clearRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶èƒŒæ™¯
                drawBackground();
                
                // ç»˜åˆ¶æ–¹å—
                drawBricks();
                
                // ç»˜åˆ¶æŒ¡æ¿
                drawPaddle();
                
                // ç»˜åˆ¶çƒ
                drawBall();
                
                // ç»˜åˆ¶èƒ½é‡æå‡
                drawPowerups();
                
                // ç»˜åˆ¶èƒ½é‡æå‡æ¿€æ´»æç¤º
                if (activePowerup) {
                    const timeLeft = Math.ceil((powerupTimer - Date.now()) / 1000);
                    if (timeLeft > 0) {
                        powerupActiveElement.textContent = `${activePowerup.name} - ${timeLeft}ç§’`;
                    }
                }
            }
            
            // ç»˜åˆ¶èƒŒæ™¯
            function drawBackground() {
                // æ¸å˜èƒŒæ™¯
                const gradient = ctx.createLinearGradient(0, 0, 0, canvas.height);
                gradient.addColorStop(0, '#0a0e27');
                gradient.addColorStop(1, '#1a1f4e');
                ctx.fillStyle = gradient;
                ctx.fillRect(0, 0, canvas.width, canvas.height);
                
                // ç»˜åˆ¶ç½‘æ ¼
                ctx.strokeStyle = 'rgba(58, 134, 255, 0.1)';
                ctx.lineWidth = 1;
                
                // å‚ç›´çº¿
                for (let x = 0; x <= canvas.width; x += 40) {
                    ctx.beginPath();
                    ctx.moveTo(x, 0);
                    ctx.lineTo(x, canvas.height);
                    ctx.stroke();
                }
                
                // æ°´å¹³çº¿
                for (let y = 0; y <= canvas.height; y += 40) {
                    ctx.beginPath();
                    ctx.moveTo(0, y);
                    ctx.lineTo(canvas.width, y);
                    ctx.stroke();
                }
            }
            
            // ç»˜åˆ¶æ–¹å—
            function drawBricks() {
                for (let c = 0; c < brickCols; c++) {
                    for (let r = 0; r < brickRows; r++) {
                        const brick = bricks[c][r];
                        if (brick.status === 1) {
                            // ç»˜åˆ¶æ–¹å—
                            ctx.fillStyle = brick.color;
                            ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
                            
                            // æ–¹å—è¾¹æ¡†
                            ctx.strokeStyle = 'rgba(255, 255, 255, 0.3)';
                            ctx.lineWidth = 2;
                            ctx.strokeRect(brick.x, brick.y, brick.width, brick.height);
                            
                            // å¦‚æœæ˜¯ç‰¹æ®Šæ–¹å—ï¼Œç»˜åˆ¶ç‰¹æ®Šæ ‡è®°
                            if (brick.isPowerupBrick) {
                                ctx.fillStyle = 'rgba(255, 255, 255, 0.7)';
                                ctx.beginPath();
                                ctx.arc(
                                    brick.x + brick.width / 2,
                                    brick.y + brick.height / 2,
                                    brick.height / 4,
                                    0,
                                    Math.PI * 2
                                );
                                ctx.fill();
                            }
                        }
                    }
                }
            }
            
            // ç»˜åˆ¶æŒ¡æ¿
            function drawPaddle() {
                // æŒ¡æ¿æ¸å˜
                const gradient = ctx.createLinearGradient(paddleX, canvas.height - paddleHeight, paddleX, canvas.height);
                gradient.addColorStop(0, '#3a86ff');
                gradient.addColorStop(1, '#4361ee');
                ctx.fillStyle = gradient;
                
                // ç»˜åˆ¶æŒ¡æ¿
                ctx.beginPath();
                ctx.roundRect(paddleX, canvas.height - paddleHeight, paddleWidth, paddleHeight, 10);
                ctx.fill();
                
                // æŒ¡æ¿è¾¹æ¡†
                ctx.strokeStyle = '#4cc9f0';
                ctx.lineWidth = 2;
                ctx.stroke();
                
                // æŒ¡æ¿å†…éƒ¨è£…é¥°
                ctx.fillStyle = 'rgba(255, 255, 255, 0.3)';
                ctx.fillRect(paddleX + 10, canvas.height - paddleHeight + 5, paddleWidth - 20, 3);
            }
            
            // ç»˜åˆ¶çƒ
            function drawBall() {
                // æ ¹æ®èƒ½é‡æå‡çŠ¶æ€æ”¹å˜çƒçš„é¢œè‰²
                let ballColor = '#ffffff';
                if (activePowerup && activePowerup.name === POWERUP_TYPES.PIERCE_BALL.name) {
                    ballColor = '#f72585';
                } else if (activePowerup && activePowerup.name === POWERUP_TYPES.SPEED_BALL.name) {
                    ballColor = '#ff9e00';
                }
                
                // çƒä½“æ¸å˜
                const gradient = ctx.createRadialGradient(
                    ballX, ballY, 0,
                    ballX, ballY, ballSize
                );
                gradient.addColorStop(0, ballColor);
                gradient.addColorStop(1, darkenColor(ballColor, 40));
                
                ctx.fillStyle = gradient;
                
                // ç»˜åˆ¶çƒ
                ctx.beginPath();
                ctx.arc(ballX, ballY, ballSize, 0, Math.PI * 2);
                ctx.fill();
                
                // çƒä½“é«˜å…‰
                ctx.fillStyle = 'rgba(255, 255, 255, 0.6)';
                ctx.beginPath();
                ctx.arc(ballX - ballSize/3, ballY - ballSize/3, ballSize/3, 0, Math.PI * 2);
                ctx.fill();
            }
            
            // ç»˜åˆ¶èƒ½é‡æå‡
            function drawPowerups() {
                for (let i = 0; i < powerups.length; i++) {
                    const powerup = powerups[i];
                    
                    // ç»˜åˆ¶èƒ½é‡æå‡
                    ctx.fillStyle = powerup.color;
                    ctx.beginPath();
                    ctx.arc(powerup.x, powerup.y, 8, 0, Math.PI * 2);
                    ctx.fill();
                    
                    // èƒ½é‡æå‡è¾¹æ¡†
                    ctx.strokeStyle = 'white';
                    ctx.lineWidth = 1;
                    ctx.stroke();
                    
                    // èƒ½é‡æå‡å‘å…‰æ•ˆæœ
                    ctx.shadowColor = powerup.color;
                    ctx.shadowBlur = 10;
                    ctx.beginPath();
                    ctx.arc(powerup.x, powerup.y, 6, 0, Math.PI * 2);
                    ctx.fill();
                    ctx.shadowBlur = 0;
                }
            }
            
            // æ›´æ–°æ¸¸æˆçŠ¶æ€
            function update() {
                // ç§»åŠ¨æŒ¡æ¿
                if (rightPressed && paddleX < canvas.width - paddleWidth) {
                    paddleX += 7;
                } else if (leftPressed && paddleX > 0) {
                    paddleX -= 7;
                }
                
                // ç§»åŠ¨çƒ
                ballX += ballSpeedX;
                ballY += ballSpeedY;
                
                // æ£€æµ‹çƒä¸å¢™å£ç¢°æ’
                // å·¦å³å¢™
                if (ballX + ballSpeedX > canvas.width - ballSize || ballX + ballSpeedX < ballSize) {
                    ballSpeedX = -ballSpeedX;
                }
                
                // ä¸Šå¢™
                if (ballY + ballSpeedY < ballSize) {
                    ballSpeedY = -ballSpeedY;
                }
                
                // ä¸‹å¢™ï¼ˆæ‰å‡ºå±å¹•ï¼‰
                else if (ballY + ballSpeedY > canvas.height - ballSize) {
                    // æ£€æµ‹çƒä¸æŒ¡æ¿ç¢°æ’
                    if (ballX > paddleX && ballX < paddleX + paddleWidth) {
                        // æ ¹æ®å‡»ä¸­æŒ¡æ¿çš„ä½ç½®æ”¹å˜åå¼¹è§’åº¦
                        const hitPoint = (ballX - paddleX) / paddleWidth;
                        const angle = hitPoint * Math.PI - Math.PI / 2; // -90Â° åˆ° 90Â°
                        
                        // è®¡ç®—æ–°çš„é€Ÿåº¦
                        const speed = Math.sqrt(ballSpeedX * ballSpeedX + ballSpeedY * ballSpeedY);
                        ballSpeedX = speed * Math.cos(angle);
                        ballSpeedY = -speed * Math.sin(angle);
                        } else {
                        }